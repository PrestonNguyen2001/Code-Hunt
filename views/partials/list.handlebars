<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Problems</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
</head>
<body>
    {{#unless isHomepage}}
    <div class="category-list-container">
        <ul id="category-list" class="category-list"></ul>
    </div>
    <div class="dropdowns-container">
        <div class="dropdown" role="menu">
            <button class="dropdown-btn" aria-haspopup="true" aria-expanded="false">Status <i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content" data-filter="status" aria-label="submenu">
                <a href="#" data-value="solved" role="menuitem">Solved</a>
                <a href="#" data-value="unsolved" role="menuitem">Unsolved</a>
            </div>
        </div>
        <div class="dropdown" role="menu">
            <button class="dropdown-btn" aria-haspopup="true" aria-expanded="false">Popularity <i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content" data-filter="popularity" aria-label="submenu">
                <a href="#" data-value="most-popular" role="menuitem">Most Popular</a>
                <a href="#" data-value="least-popular" role="menuitem">Least Popular</a>
            </div>
        </div>
        <div class="dropdown" role="menu">
            <button class="dropdown-btn" aria-haspopup="true" aria-expanded="false">Difficulty <i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content" data-filter="difficulty" aria-label="submenu">
                <a href="#" data-value="easy" role="menuitem">Easy</a>
                <a href="#" data-value="medium" role="menuitem">Medium</a>
                <a href="#" data-value="hard" role="menuitem">Hard</a>
            </div>
        </div>
        <div class="dropdown" role="menu">
            <button class="dropdown-btn" aria-haspopup="true" aria-expanded="false">Category <i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content" id="category-dropdown-content" data-filter="category" aria-label="submenu">
                <!-- Category options will be populated here dynamically -->
            </div>
        </div>
    </div>
    {{/unless}}
    
    <div class="hidden" style="display: none;"><div class="category-list-container">
        <ul id="category-list" class="category-list"></ul>
    </div>
    <div class="dropdowns-container">
        <div class="dropdown" role="menu">
            <button class="dropdown-btn" aria-haspopup="true" aria-expanded="false">Status <i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content" data-filter="status" aria-label="submenu">
                <a href="#" data-value="solved" role="menuitem">Solved</a>
                <a href="#" data-value="unsolved" role="menuitem">Unsolved</a>
            </div>
        </div>
        <div class="dropdown" role="menu">
            <button class="dropdown-btn" aria-haspopup="true" aria-expanded="false">Popularity <i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content" data-filter="popularity" aria-label="submenu">
                <a href="#" data-value="most-popular" role="menuitem">Most Popular</a>
                <a href="#" data-value="least-popular" role="menuitem">Least Popular</a>
            </div>
        </div>
        <div class="dropdown" role="menu">
            <button class="dropdown-btn" aria-haspopup="true" aria-expanded="false">Difficulty <i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content" data-filter="difficulty" aria-label="submenu">
                <a href="#" data-value="easy" role="menuitem">Easy</a>
                <a href="#" data-value="medium" role="menuitem">Medium</a>
                <a href="#" data-value="hard" role="menuitem">Hard</a>
            </div>
        </div>
        <div class="dropdown" role="menu">
            <button class="dropdown-btn" aria-haspopup="true" aria-expanded="false">Category <i class="fa fa-caret-down"></i></button>
            <div class="dropdown-content" id="category-dropdown-content" data-filter="category" aria-label="submenu">
                <!-- Category options will be populated here dynamically -->
            </div>
        </div>
    </div></div>
    <div class="problems-container">
        <table class="problems-table">
            <thead class="table-head">
                <tr class="table-row">
                    <th scope="col">Status</th>
                    <th scope="col">Title</th>
                    <th scope="col">Difficulty</th>
                    <th scope="col">Category</th>
                    <th scope="col">Solution</th>
                </tr>
            </thead>
            <tbody id="problems-table-body">
                {{#each problems}}
                <tr class="problems-table-row">
                    <td class="status-cell">
                        {{#if solved}}
                        <i class="fas fa-check-circle text-success"></i>
                        {{/if}}
                    </td>
                    <td class="title-cell">
                        <a href="/problems/{{id}}" class="problem-link">{{title}}</a>
                    </td>
                    <td class="difficulty-cell {{difficulty}}">
                        {{difficulty}}
                    </td>
                    <td>{{category}}</td>
                    <td class="solution-cell">
                        {{#if video_id}}
                        <i class="fab fa-youtube text-danger youtube-icon" data-video-id="{{video_id}}"></i>
                        {{else}}
                        <p class="text-gray-400">Coming soon</p>
                        {{/if}}
                    </td>
                </tr>
                {{/each}}
            </tbody>
            <tfoot>
                <tr>
                <td colspan="5">
                    <div class="pagination-controls">
                    <div class="per-page">
                        <label for="problems-per-page" class="sr-only">Problems per page:</label>
                        <select id="problems-per-page" class="dropdown-select">
                        <option value="10">10 / page</option>
                        <option value="20">20 / page</option>
                        </select>
                    </div>
                    <nav role="navigation" class="page-navigation">
                        <button class="pagination-button" id="prev-page" disabled>
                        <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <div class="pagination-numbers" id="page-numbers"></div>
                        <button class="pagination-button" id="next-page">
                        Next <i class="fas fa-arrow-right"></i>
                        </button>
                    </nav>
                    </div>
                </td>
                </tr>
            </tfoot>
        </table>
    </div>

    <!-- YouTube Modal -->
    <div id="youtube-modal" class="modal">
        <div class="youtube-modal-content">
            <span class="close-btn">&times;</span>
            <div id="youtube-player"></div>
        </div>
    </div>

    <script src="/js/problemsTable.js"></script>
</body>
</html>
